(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3370],{4657:function(e,r,t){"use strict";var n=t(67105),o=t(24246),i=t(98502),c=t(9986),a=t(32216),l=t(71694),u=t(36083);function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}r.Z=function(e){var r=e.loading,t=e.disabled,d=(0,i.Z)(e,["loading","disabled"]),f=d.href?a.Z:c.Z;return(0,o.jsx)(f,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({width:260,prefix:r?(0,o.jsx)(u.Z,{}):(0,o.jsx)(l.Z,{width:20,height:20,color:"currentColor"}),normal:{background:"#0052CC",border:"#0052CC",foreground:"#fff"},hover:{background:"#1668E2",border:"#1668E2",foreground:"#fff"},disabled:t||r},d))}},39383:function(e,r,t){"use strict";var n=t(67105),o=t(24246),i=t(98502),c=t(9986),a=t(32216),l=t(45093),u=t(36083);function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}r.Z=function(e){var r=e.loading,t=e.disabled,d=(0,i.Z)(e,["loading","disabled"]),f=d.href?a.Z:c.Z;return(0,o.jsx)(f,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({width:d.width||260,prefix:r?(0,o.jsx)(u.Z,{}):(0,o.jsx)(l.Z,{height:"20",width:"20",fill:"currentColor"}),normal:{background:"#24292e",border:"#24292e",foreground:"#fff"},hover:{background:"#555",border:"#555",foreground:"#fff"},disabled:t||r},d))}},62380:function(e,r,t){"use strict";var n=t(67105),o=t(24246),i=t(98502),c=t(9986),a=t(32216),l=t(97127),u=t(36083);function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.Z=function(e){var r=e.loading,t=e.disabled,n=(0,i.Z)(e,["loading","disabled"]),s=n.href?a.Z:c.Z;return(0,o.jsx)(s,d(d({width:260,prefix:r?(0,o.jsx)(u.Z,{}):(0,o.jsx)(l.Z,{height:20,width:20,monochrome:!0}),normal:{background:"#6b4fbb",border:"#6b4fbb",foreground:"#fff"},hover:{background:"#8367D3",border:"#8367D3",foreground:"#fff"}},n),{},{disabled:t||r}))}},17146:function(e,r,t){"use strict";var n=t(67105),o=t(24246),i=t(98502),c=t(27378),a=t(79894),l=t(74497),u=t(84415);function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var f=(0,c.forwardRef)((function(e,r){var t=e.children,n=e.onClick,c=e.onMouseEnter,a=(0,i.Z)(e,["children","onClick","onMouseEnter"]);return(0,o.jsx)(l.Z,d(d({ref:r},a),{},{passthroughOnClick:n,passthroughOnMouseEnter:c,children:t}))}));f.displayName="ButtonWrapper",r.Z=function(e){var r=e.href,t=e.as,n=e.tab,c=e.shallow,s=e.children,p=(0,i.Z)(e,["href","as","tab","shallow","children"]);return p.disabled||p.loading?(0,o.jsx)(l.Z,d(d({},p),{},{children:s})):"string"===typeof r&&(n||r&&!(0,u.Z)(r))?(0,o.jsx)(l.Z,d(d({Component:"a",href:p.disabled?void 0:r,target:n?"_blank":void 0,rel:n?"noopener":void 0},p),{},{children:s})):(0,o.jsx)(a.default,{href:r,as:t,shallow:c,passHref:!0,children:(0,o.jsx)(f,d(d({Component:"a",target:n?"_blank":void 0,rel:n?"noopener":void 0},p),{},{children:s}))})}},32216:function(e,r,t){"use strict";var n=t(67105),o=t(24246),i=t(98502),c=t(17146),a=t(9986),l=t(38944),u=t(65698),s=t.n(u);function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.Z=function(e){var r=e.normal,t=e.active,n=e.hover,u=(0,i.Z)(e,["normal","active","hover"]),d=(0,a.K)({normal:r,active:t,hover:n}),p=d.className,v=d.styles;return(0,o.jsxs)(c.Z,f(f({},u),{},{"data-custom-button":"",className:(0,l.Z)(s().button,p),children:[u.children,v]}))}},9986:function(e,r,t){"use strict";t.d(r,{K:function(){return p}});var n=t(24246),o=t(67105),i=t(98502),c=t(79892),a=t(38944),l=t(74497),u=t(65698),s=t.n(u);function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function p(e){var r,t,o,i,a,l,u,s,d;return{styles:(0,n.jsx)(c.default,{id:"2164595684",dynamic:[(null===(r=e.normal)||void 0===r?void 0:r.foreground)||"",(null===(t=e.normal)||void 0===t?void 0:t.background)||"",(null===(o=e.normal)||void 0===o?void 0:o.border)||"",(null===(i=e.active)||void 0===i?void 0:i.foreground)||"",(null===(a=e.active)||void 0===a?void 0:a.background)||"",(null===(l=e.active)||void 0===l?void 0:l.border)||"",(null===(u=e.hover)||void 0===u?void 0:u.foreground)||"",(null===(s=e.hover)||void 0===s?void 0:s.background)||"",(null===(d=e.hover)||void 0===d?void 0:d.border)||""],children:["[data-custom-button].__jsx-style-dynamic-selector{--button-custom-fg:".concat((null===(r=e.normal)||void 0===r?void 0:r.foreground)||"",";--button-custom-bg:").concat((null===(t=e.normal)||void 0===t?void 0:t.background)||"",";--button-custom-border:").concat((null===(o=e.normal)||void 0===o?void 0:o.border)||"",";--button-custom-fg-active:").concat((null===(i=e.active)||void 0===i?void 0:i.foreground)||"",";--button-custom-bg-active:").concat((null===(a=e.active)||void 0===a?void 0:a.background)||"",";--button-custom-border-active:").concat((null===(l=e.active)||void 0===l?void 0:l.border)||"",";--button-custom-fg-hover:").concat((null===(u=e.hover)||void 0===u?void 0:u.foreground)||"",";--button-custom-bg-hover:").concat((null===(s=e.hover)||void 0===s?void 0:s.background)||"",";--button-custom-border-hover:").concat((null===(d=e.hover)||void 0===d?void 0:d.border)||"",";}")]}),className:c.default.dynamic([["2164595684",[(null===(r=e.normal)||void 0===r?void 0:r.foreground)||"",(null===(t=e.normal)||void 0===t?void 0:t.background)||"",(null===(o=e.normal)||void 0===o?void 0:o.border)||"",(null===(i=e.active)||void 0===i?void 0:i.foreground)||"",(null===(a=e.active)||void 0===a?void 0:a.background)||"",(null===(l=e.active)||void 0===l?void 0:l.border)||"",(null===(u=e.hover)||void 0===u?void 0:u.foreground)||"",(null===(s=e.hover)||void 0===s?void 0:s.background)||"",(null===(d=e.hover)||void 0===d?void 0:d.border)||""]]])}}r.Z=function(e){var r=e.normal,t=e.active,o=e.hover,c=(0,i.Z)(e,["normal","active","hover"]),u=p({normal:r,active:t,hover:o}),d=u.className,v=u.styles;return(0,n.jsxs)(l.Z,f(f({},c),{},{"data-custom-button":"",className:(0,a.Z)(s().button,d),children:[c.children,v]}))}},36427:function(e,r,t){"use strict";var n=t(67105),o=t(24246),i=t(27378),c=t(38944),a=t(48298),l=t(2604),u=t(9388),s=t.n(u),d=t(89004),f=t(63677),p=function(e){var r,t=e.id,u=e.style,p=e.label,v=void 0===p?"Error":p,b=e.className,h=e.children,g=e.size,O=e.error;var m=(0,d.U)(g),y=(0,i.useMemo)((function(){return h||(i.isValidElement(O)?O:O&&"object"===typeof O?(0,o.jsxs)(o.Fragment,{children:[O.message,O.link?(0,o.jsxs)(o.Fragment,{children:[" ",(0,o.jsx)("span",{className:s()["action-link"],children:(0,o.jsxs)(f.Z,{type:"blend",href:O.link,children:[null!==(e=O.action)&&void 0!==e?e:"Learn More"," \u2192"]})})]}):null]}):O);var e}),[h,O]);return(0,o.jsxs)("div",{role:"alert","aria-atomic":"true",className:(0,c.Z)(s().error,b,(r={},(0,n.Z)(r,s().label,!!v),(0,n.Z)(r,s().large,"large"===g),(0,n.Z)(r,s().small,"small"===g),r)),id:t,style:u,"data-geist-error":"",children:[(0,o.jsx)("div",{"aria-hidden":!0,children:(0,o.jsx)(a.Z,{size:m,color:"var(--geist-error)",weight:"bold",align:"bottom"})}),(0,o.jsxs)("div",{className:s().text,children:[v&&(0,o.jsxs)("b",{children:[v,":"]}),(0,o.jsx)(l.Z,{inline:!0,x:.25}),y]})]})};p.displayName="Error",r.Z=(0,i.memo)(p)},24660:function(e,r,t){"use strict";t.d(r,{_:function(){return p},F:function(){return v}});var n=t(88742),o=t.n(n),i=t(40505),c=t(67921),a=t.n(c),l=t(70053),u=t(55888),s=t(48339),d=t(69685),f=t(89615),p=function(){var e=(0,i.Z)(o().mark((function e(){var r,t,n,i,c,a,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new URLSearchParams(window.location.search),t=r.has("confirmed"),n=r.has("loginError")?(0,d.j)(r.get("loginError")):null,!t){e.next=8;break}return e.next=6,(0,s.Z)({email:null!==(i=r.get("email"))&&void 0!==i?i:void 0,token:null!==(c=r.get("token"))&&void 0!==c?c:void 0,ssoUserId:null!==(a=r.get("ssoUserId"))&&void 0!==a?a:void 0});case 6:return l=e.sent,e.abrupt("return",{redirect:!0,loginError:n,token:l,params:r});case 8:return e.abrupt("return",{token:null,redirect:!1,loginError:n,params:r});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function v(e){a().remove("logged-out"),(0,f.Z)("authorization","Bearer ".concat(e),"365d"),(0,l.JG)(u.zh,null,!1),window.__token=e}},48339:function(e,r,t){"use strict";t.d(r,{Z:function(){return f}});var n=t(88742),o=t.n(n),i=t(67105),c=t(40505),a=t(48966),l=t(55888),u=t(61659);function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function f(e){return p.apply(this,arguments)}function p(){return(p=(0,c.Z)(o().mark((function e(r){var t,n,i,c,s,f,p,v,b;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.email,n=r.token,i=r.ssoUserId,c=a.stringify(d({email:t,token:n,t:Date.now()},i&&{ssoUserId:i})),e.prev=2,(f=(0,u.LP)())&&(s={authorization:"Bearer ".concat(f)}),e.next=7,fetch("".concat(l.OK,"/verify?").concat(c),{headers:s});case 7:if(!(p=e.sent).redirected){e.next=12;break}throw(v=new Error).redirect=!0,v;case 12:return e.next=14,p.json();case 14:return b=e.sent,e.abrupt("return",null===b||void 0===b?void 0:b.token);case 18:if(e.prev=18,e.t0=e.catch(2),!e.t0.redirect){e.next=22;break}throw e.t0;case 22:if(403!==e.t0.status){e.next=24;break}throw e.t0;case 24:case"end":return e.stop()}}),e,null,[[2,18]])})))).apply(this,arguments)}},69685:function(e,r,t){"use strict";t.d(r,{e:function(){return o},j:function(){return i}});var n=t(43434);function o(e){return e&&n.aU[e]?n.Sg[n.aU[e]]:e&&n.Sg[e]?n.Sg[e]:null}function i(e){if("string"!==typeof e)return null;var r;try{r=JSON.parse(decodeURIComponent(e))}catch(t){return null}return r.message=o(r.code)||r.message||"Unknown error.",r}},24086:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(88742),o=t.n(n),i=t(40505),c=t(59972),a=t(83101),l=t(76982),u=t(67105);var s=function(){function e(r){var t=r.id,n=r.url,o=r.width,i=void 0===o?800:o,c=r.height,l=void 0===c?600:c,s=r.callbacks,d=void 0===s?{}:s;(0,a.Z)(this,e),(0,u.Z)(this,"id",void 0),(0,u.Z)(this,"url",void 0),(0,u.Z)(this,"width",void 0),(0,u.Z)(this,"height",void 0),(0,u.Z)(this,"callbacks",void 0),(0,u.Z)(this,"popup",void 0),(0,u.Z)(this,"interval",void 0),this.id=t,this.url=n,this.width=i,this.height=l,this.callbacks=d}return(0,l.Z)(e,[{key:"open",value:function(){var e,r;if(!this.popup||this.popup.closed){var t=!0;if(("maxTouchPoints"in navigator&&navigator.maxTouchPoints>0||"msMaxTouchPoints"in navigator&&navigator.msMaxTouchPoints>0)&&this.callbacks.onMobile&&(t=this.callbacks.onMobile()),t){var n,o,i,a,l=(n=this.width,o=this.height,{width:n,height:o,top:window.top.outerHeight/2+window.top.screenY-o/2,left:window.top.outerWidth/2+window.top.screenX-n/2});if(this.popup=window.open(this.url,this.id,Object.entries(l).map((function(e){var r=(0,c.Z)(e,2),t=r[0],n=r[1];return"".concat(t,"=").concat(n)})).join(",")),!this.popup||this.popup.closed||"undefined"===typeof this.popup.closed)return null===(i=(a=this.callbacks).onBlocked)||void 0===i||i.call(a),this.cancelPolling(),void(this.popup=null);null===(e=(r=this.callbacks).onOpen)||void 0===e||e.call(r,this.popup),this.poll()}}else{var u;null===(u=window.open("",this.id))||void 0===u||u.focus()}}},{key:"close",value:function(){var e,r,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.cancelPolling(),this.popup&&!this.popup.closed)&&(this.popup.close(),t||null===(e=(r=this.callbacks).onClose)||void 0===e||e.call(r))}},{key:"poll",value:function(){var e=this;this.interval=setInterval((0,i.Z)(o().mark((function r(){var t,n,i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,e.popup&&!1===e.popup.closed){r.next=6;break}return e.cancelPolling(),r.next=5,null===(i=(c=e.callbacks).onAbort)||void 0===i?void 0:i.call(c);case 5:return r.abrupt("return");case 6:return r.next=8,null===(t=(n=e.callbacks).onPoll)||void 0===t?void 0:t.call(n,e.popup);case 8:r.next=12;break;case 10:r.prev=10,r.t0=r.catch(0);case 12:case"end":return r.stop()}}),r,null,[[0,10]])}))),500)}},{key:"cancelPolling",value:function(){this.interval&&(clearInterval(this.interval),this.interval=null)}}]),e}()},91290:function(e,r,t){"use strict";t.d(r,{YN:function(){return N},PM:function(){return _},aC:function(){return U}});var n=t(88742),o=t.n(n),i=t(40505),c=t(98502),a=t(67105),l=t(27378),u=t(86677),s=t(43434),d=t(79927),f=t(48966),p=t(93632),v=t(55888);function b(e,r){return h.apply(this,arguments)}function h(){return(h=(0,i.Z)(o().mark((function e(r,t){var n,i,c,a,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mode,i=d.daumtools.userAgent(),c=i&&i.browser&&i.browser.name,a="Website (".concat(c.charAt(0).toUpperCase()+c.slice(1),")"),l=f.stringify({mode:n}),e.abrupt("return",(0,p.Z)("".concat(v.OK,"?").concat(l),null,{method:"POST",body:JSON.stringify({email:r,tokenName:a}),throwOnHTTPError:!0}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=t(48339),O=t(61213),m=t(24660),y=t(76244),j=t(43483);function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function k(e){for(var r=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach((function(r){(0,a.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e),t=0,n=Object.keys(r);t<n.length;t++){var o=n[t];void 0===r[o]&&delete r[o]}return r}var P=t(24086),x=t(97165),Z=t(53944),E=t(69685),S=t(3299);function D(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function I(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?D(Object(t),!0).forEach((function(r){(0,a.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var _={PLACEHOLDER:"placeholder",INPUT:"input",LOADING_EMAIL:"loading-email",LOADING_GITHUB:"loading-github",LOADING_GITLAB:"loading-gitlab",LOADING_BITBUCKET:"loading-bitbucket",LOADING_SAML:"loading-saml",VERIFYING:"verifying",SUCCESS:"success",ERROR:"error"},N=[_.LOADING_GITHUB,_.LOADING_GITLAB,_.LOADING_BITBUCKET,_.LOADING_SAML,_.LOADING_EMAIL];function A(e,r){return I(I({},e),r)}var L={loginState:_.INPUT,loginError:null},R=function(){},C=function(){return"".concat(window.location.origin,"/oauth/git")},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,l.useReducer)(A,L),n=t[0],d=t[1],f=(0,l.useRef)(null),p=(0,u.useRouter)(),h=p.query,w=(0,j.Z)(p.query.next),D=(0,S.fk)(),N=D.mutate,U=(0,l.useCallback)((function(){return N().then((function(e){var r=e.value;location.href=r?"/onboarding":"/new"})).catch((function(){location.href="/new"}))}),[N]),T=(0,l.useRef)(R),G=(0,l.useRef)(r);G.current=r,(0,l.useEffect)((function(){return function(){f.current&&f.current.close(),f.current=null}}),[]),(0,l.useEffect)((function(){if(u.default.query.next&&!(0,j.Z)(u.default.query.next)){var e=u.default.pathname,r=u.default.query;delete r.next,u.default.replace({pathname:e,query:r},void 0,{shallow:!0})}}),[]),(0,l.useEffect)((function(){if(!f.current){if("saml"===h.loginType&&"1"===h.confirmed){d({loginState:_.LOADING_SAML});var e=C()+(0,x.c)(I({next:h.teamSlug?"/".concat(h.teamSlug):void 0},h));u.default.push(e)}"saml"===h.origin&&"/login"===location.pathname&&(d({loginState:_.LOADING_SAML}),u.default.push("/teams/connect".concat((0,x.c)(h))))}}),[h]),(0,l.useEffect)((function(){h.loginError&&d({loginState:_.ERROR,loginError:(0,E.j)(h.loginError)})}),[h.loginError]);var M=(0,l.useCallback)((function(r){var t,n;if(f.current)if(r.source===f.current.popup)if("object"===typeof r.data&&r.data){var o=r.data,i=o.source,a=o.token,l=o.close,s=(0,c.Z)(o,["source","token","close"]);if("vercel-verify-auth"===i){var p=null===(t=f.current)||void 0===t||null===(n=t.popup)||void 0===n?void 0:n.location.search,v=p?new URLSearchParams(p):null;if(l)return f.current.close(!0),f.current=null,v&&v.has("origin")&&"saml"===v.get("origin")?void u.default.push("/teams/connect?".concat(v.toString())):void 0;s.loginError&&(f.current.close(!0),f.current=null),d(s);var b=G.current;if(a){var h,g=v?v.get("next"):null,O=g?decodeURIComponent(g):null;if(null===(h=f.current)||void 0===h||h.close(!0),f.current=null,(0,m.F)(a),b.onAuthenticated)b.onAuthenticated(a);else{var y=O||w||"signup"!==e&&"/dashboard";y?location.href=y:U()}}else{var j;null===(j=b.onError)||void 0===j||j.call(b)}}else console.warn("Ignoring message with external source: ".concat(i))}else console.warn("Ignoring message with invalid data: ".concat(r.data));else console.warn("Ignoring message with invalid origin")}),[e,w,U]);function B(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.next,i=n.callbackParams,a=(0,c.Z)(n,["next","callbackParams"]),l=C()+(0,x.c)(I({next:o},i));y.B({category:"Account",label:"login"===e?"Login":"Sign Up",action:"".concat((0,Z.Z)(r)||r," login")});var u="saml"===r.toLowerCase()?"https://api.vercel.com/auth/sso":v.OK,s="".concat(u).concat(t).concat((0,x.c)(I({mode:e,next:l},a)));d({loginError:null}),W(s,r)}function W(e,r){f.current=new P.Z({id:"vercel-login-popup",url:e,callbacks:{onOpen:function(){d({loginState:_["LOADING_".concat(r.toUpperCase())]})},onAbort:function(){f.current=null,d({loginState:_.INPUT})},onClose:function(){f.current=null,d({loginState:_.INPUT})},onBlocked:function(){f.current=null,d({loginState:_.ERROR,loginError:{code:null,message:"The popup to authenticate with ".concat((0,Z.Z)(r)||r," could not be opened.")}})}}}),f.current.open()}function q(){n.email&&(f.current=new P.Z({id:"verify-popup",url:"/oauth/verify?email=".concat(encodeURIComponent(n.email)),callbacks:{onAbort:function(){f.current=null,d({loginState:_.INPUT})},onClose:function(){f.current=null,d({loginState:_.INPUT})},onBlocked:function(){f.current=null,d({loginState:_.ERROR,loginError:{code:null,message:"The popup to verify your account could not be opened."}})}}}),f.current.open())}function F(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};B(e,"github"===e?"/login-with-github":"/".concat(e,"/connect"),r)}function K(){return H.apply(this,arguments)}function H(){return(H=(0,i.Z)(o().mark((function r(){var t,i,c,a,l,u,f,p=arguments;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},i=n.email,c=!1,T.current(),T.current=function(){return c=!0},r.prev=5,d({loginState:_.LOADING_EMAIL,loginError:null}),r.next=9,b(i,{mode:e});case 9:a=r.sent,d({loginState:_.VERIFYING,email:i,securityCode:a.securityCode});case 11:if(!c){r.next=14;break}return r.abrupt("return");case 14:return r.next=16,(0,g.Z)({email:i,token:a.token,ssoUserId:null===(u=t.callbackParams)||void 0===u?void 0:u.ssoUserId});case 16:if(!(l=r.sent)){r.next=19;break}return r.abrupt("break",23);case 19:return r.next=21,(0,O.Z)(2500);case 21:r.next=11;break;case 23:if((0,m.F)(l),y.B({category:"Account",label:"Login",action:"Email login"}),!(f=t.next||w)){r.next=31;break}return location.href=f,r.abrupt("return");case 31:if("signup"!==e){r.next=34;break}return U(),r.abrupt("return");case 34:d({loginState:_.SUCCESS}),r.next=42;break;case 37:if(r.prev=37,r.t0=r.catch(5),!c){r.next=41;break}return r.abrupt("return");case 41:r.t0.redirect||(null===r.t0||void 0===r.t0?void 0:r.t0.code)===s.aU.ACCOUNT_NEEDS_VERIFY?q():d({loginState:_.ERROR,loginError:r.t0});case 42:case"end":return r.stop()}}),r,null,[[5,37]])})))).apply(this,arguments)}function J(){return z.apply(this,arguments)}function z(){return(z=(0,i.Z)(o().mark((function r(){var t,i,c=arguments;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},i=n.teamSlug){r.next=4;break}return r.abrupt("return",d({loginState:_.ERROR,loginError:{code:null,message:"Please enter a Team slug."}}));case 4:B("SAML","",I(I({next:"/".concat(i)},t),{},{teamId:i,mode:e}));case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function V(){T.current(),d({loginState:_.INPUT,loginError:null});var e=p.pathname,r=p.query,t=k({next:r.next,isRequestAccess:r.isRequestAccess,teamName:r.teamName});p.replace({pathname:e,query:t})}function Y(e,r){var t;n.loginState===_.ERROR?d((t={},(0,a.Z)(t,e,r),(0,a.Z)(t,"loginError",null),t)):d((0,a.Z)({},e,r))}(0,l.useEffect)((function(){return window.addEventListener("message",M),function(){window.removeEventListener("message",M)}}),[M]);var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F("github",e)},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F("gitlab",e)},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F("bitbucket",e)};return{saveInput:Y,cancelLogin:V,loginWithEmail:K,loginWithSAML:J,loginWithGitHub:X,loginWithGitLab:Q,loginWithBitbucket:$,loginWithGit:F,state:n,dispatch:d}}},65698:function(e){e.exports={button:"custom_button__3soJs"}},9388:function(e){e.exports={error:"error_error__3mrJ4","action-link":"error_action-link__2U1iD",label:"error_label__1DIup",text:"error_text__3FAOV",small:"error_small__150fJ",large:"error_large__2WW5K"}}}]);